import { AfterViewInit, ChangeDetectionStrategy, Component, ElementRef, OnInit, ViewChild } from '@angular/core';
import { gsap } from 'gsap';
import { DrawSVGPlugin } from 'gsap/DrawSVGPlugin';

gsap.registerPlugin(DrawSVGPlugin);

@Component({
  selector: 'ju-logo',
  template: `
    <svg xmlns="http://www.w3.org/2000/svg" width="682" height="226" viewBox="0 0 1276.5 416" class="ju-said" #canvas>
      <defs>
        <g id="masks-ju">
          <mask id="mask-ju-J">
            <path
              class="path"
              id="mask-j"
              #maskJ
              d="M45,366.3V354.09L81.15,337l27.13-3.1H124L144.6,337l44.52,5.5,33.5,4.12,27.54,3.48h33.7l40.87-7.93,17-11.92,8-3.75-2.42,63-3.14,79-5,42.8-12,32.2L317.2,555.72l-6.3,1.78-8-4.72-7.78-13.57-2.68-14.71,2.68-18,4.48-18,6.14-14L313,461.87l7.07-9.37,7.22-10.5,9.75-10.95L372.3,396.5l30.7-30"
              stroke="#000"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="16"
            />
          </mask>
          <mask id="mask-ju-U">
            <path
              class="path"
              id="mask-u"
              #maskU
              d="M410,334l-5,56.64,5,28.67,3.7,12.39,7.3,5.82,9.38-5.82L441,417l4-18,2-15,7-26,10-10,7-7h0l-1,27-1,16-1,12.5-1,15.62,2,13.68,1.56,11.72L474,448.24l4,6.85,5,3.91h7.3l7.7-10.74,6-10.74,6-14.65,6-15.19,3.24-11.18L522,385.76l3-8.79,5-14.84"
              stroke="#000"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="16"
            />
          </mask>
          <mask id="mask-ju-S">
            <path
              class="path"
              id="mask-s"
              #maskS
              d="M633.5,332.5l11-14,1.14-7.35L642,309h-4.31L632,310l-5,4-3.61,13L627,347l24.5,44.5,12,29,2,10-1,18L649,469l-17.69-1L622,460l-4-16,2.64-11.35L625,423l7-10,9.5-7.93,4.14-4.66a4,4,0,0,1,.82-.71L663,389l11-7,8-6,9.56-7.17"
              stroke="#000"
              stroke-linecap="round"
              stroke-miterlimit="10"
              stroke-width="18"
            />
          </mask>
          <mask id="mask-ju-A">
            <path
              class="path"
              id="mask-a"
              #maskA
              d="M762.47,337.43,751.82,325.5l-9.83-6H731.3L720.76,322,710.55,336.5l-10.81,21L697,379.69l1.43,18.2L705,412.23l8.53,6.27,9-3.85,5.71-3.15,10.09-13.61L747.6,384l4.27-7.28,4.51-8.39,4.28-8.83,1.81-3.69,2.12-8.31,3.93-17,2-5,3.71,1-3.71,30-3.93,26,2,21,3,16,3.93,11,5.89,5,4.92,1,6.87-5,5.9-7,6.88-14,4.91-11,4.82-10,3.51-9.83,2.49-5.25,3-6.11,1.29-4.83"
              stroke="#000"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="18"
            />
          </mask>
          <mask id="mask-ju-I">
            <g id="mask-i">
              <path
                class="path"
                id="mask-i-line"
                #maskILine
                d="M832.77,327l-4.93,57.24,4.93,30.51,7.14,19.64,6.83,2.11,8.75-6.87L866,414.75l11.74-25L888,363.83"
                stroke="#000"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="18"
              />
              <path
                class="path"
                id="mask-i-dot"
                #maskIDot
                d="M833,300.32l1.57,2.38,1.88.84,1.68-.84,1.1-1.08.41-1.3-.55-1.41-1-1.41h-2.45l-1.38.7Z"
                stroke="#000"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="16"
              />
            </g>
          </mask>
          <mask id="mask-ju-D">
            <g id="mask-d">
              <path
                class="path"
                id="mask-d-front"
                #maskDFront
                d="M950.21,337l-7.08-7.5-10-5.9-9.67-1.1-8,2.52-7.34,4.48-8,12.71L893.9,360.5l-2.93,14-2,13.84,2,14.16,6.2,13.76,9.46,5.24,8.83-3.85L927.2,405.5l8.93-13,7.67-12.8,4.33-8,2.37-9.27-2.25,9.5"
                stroke="#000"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="18"
              />
              <path
                class="path"
                id="mask-d-back"
                #maskDBack
                d="M975.18,297.51,985.62,290l11.88-11.5,8.2-9.24,3.8-5.76,8-13,8-14,5-13,4-12,3-13,1-12-1-13-5-10-7-5h-10.44l-5.87,2.61-6.69,8.39-8,13-9,22-8,30-8,46-4,44-2.52,57v38.14l7.52,21.86,4.68,7.5,8.32-1.5,8-7,6-12,6.59-10,8.41-13,5-7,7-7,6-5,7-4L1049,378l17.48-3.5,14-1,16,1,24,2.22,31.4,4.78,33.59,5,28,4h30l29-4,18-8,10-9.73,4-10.27"
                stroke="#000"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="17"
              />
            </g>
          </mask>
        </g>
      </defs>

      <g id="Ju_Said">
        <path
          class="path"
          mask="url(#mask-ju-J)"
          id="logo-j"
          d="M355.7,326.4l-.7,43.05L354,410.4q6.65-7.35,12.25-12.95l10.68-10.67q5.06-5.07,10.5-10.33T399.1,364.9a2.56,2.56,0,0,1,3.32-.88c1.28.59,1.23,1.81-.17,3.68q-8.06,7.35-13.83,13.13t-11,11.2q-5.25,5.43-10.67,11.19T354,416.7q-.36,11.55-1.05,25.72t-2.1,28.88Q349.39,486,347,500.35a204.55,204.55,0,0,1-6.3,26.6q-5.94,17.5-14.17,25.72t-16.1,7.71c-5.26-.35-9.74-3.63-13.48-9.8s-5.71-15-5.95-26.43a84.7,84.7,0,0,1,3.85-27.48,150.4,150.4,0,0,1,11-26.25A183.14,183.14,0,0,1,321.4,446.1q8.76-11.55,17.15-21.7l2.1-94.15A76.42,76.42,0,0,1,310,347.92a151.28,151.28,0,0,1-38.32,6.31A314.86,314.86,0,0,1,228.83,353q-22.23-2.1-44.28-5.08t-43.05-5.59a270.77,270.77,0,0,0-38.67-2.28q-17.67.36-31.16,4.9t-20.82,15.4a8.05,8.05,0,0,1-.18,5.95q-1.22,3.51-3,3.85c-1.16,0-2-1-2.45-3.15s.58-5.25,3.15-9.45a51.52,51.52,0,0,1,23.27-20.82q14.53-6.48,33.08-7.35a226.68,226.68,0,0,1,39.9,1.92q21.36,2.81,43.75,6.47T233,344.6a283.06,283.06,0,0,0,42.18,3,137,137,0,0,0,36.92-5.08A61.57,61.57,0,0,0,341,324.65a4.39,4.39,0,0,1,3.15-2.45,12.54,12.54,0,0,1,5.08-.35,12.88,12.88,0,0,1,4.54,1.4A3.39,3.39,0,0,1,355.7,326.4ZM338.2,431.05q-7.69,9.1-15.58,19.95a176.24,176.24,0,0,0-14,22.75,146.73,146.73,0,0,0-10,24.67,81.06,81.06,0,0,0-3.5,25.73q.36,13.29,3.68,20.47t8.05,8c3.14.58,6.53-1.17,10.14-5.25s7-10.67,10-19.77a190.49,190.49,0,0,0,5.25-22.93q2.1-12.42,3.5-25.19t1.92-25.38Q338.19,441.55,338.2,431.05Z"
          transform="translate(-37 -149.5)"
          fill="var(--primary)"
        />
        <path
          class="path"
          mask="url(#mask-ju-U)"
          id="logo-u"
          d="M401.54,338.3a4.32,4.32,0,0,1,3-3.5,12.43,12.43,0,0,1,5.42-.88,9.92,9.92,0,0,1,4.9,1.58,3.7,3.7,0,0,1,1.75,3.85q-2.44,17.85-4.2,38.15-.34,7-.35,13.83a180.1,180.1,0,0,0,1.4,19.07,86.13,86.13,0,0,0,2.8,14.52q1.75,5.79,4.38,7.7t6.12-.34q3.5-2.29,8.05-10.33a88.75,88.75,0,0,0,5.95-12.07q3.15-7.53,6.3-16.1T453,376.27q2.81-8.91,5.08-16.62t3.85-13.13a54.14,54.14,0,0,1,2.27-6.82c0-.46.06-.7.18-.7s.17-.11.17-.35a5.37,5.37,0,0,1,3.5-2.8,12.54,12.54,0,0,1,5.08-.35,8.77,8.77,0,0,1,4.37,1.75,3.89,3.89,0,0,1,1.4,3.85q-.7,4.56-.87,6.82c-.12,1.53-.18,3-.18,4.38a32.78,32.78,0,0,1-.35,4.55c-.23,1.64-.47,4.09-.7,7.35q-.35,3.51-.7,12.6t-.52,19.6q-.18,10.5,0,20.82t.87,16.63a103.44,103.44,0,0,0,2.63,14.53q1.57,5.76,4.2,7.7c1.75,1.27,3.85,1.1,6.3-.53s5.3-5.13,8.57-10.5q4.2-6.65,8.58-18.9t8.4-24.85q4-12.6,6.82-22.92t3.85-13.48a2,2,0,0,1,2.45-1.4c1.17.24,1.75,1.17,1.75,2.8q-2.1,6-5.25,17t-7,23.28q-3.86,12.26-8.22,23.62a106.08,106.08,0,0,1-8.58,18q-11.9,17.51-22.05,12.6t-15.4-26.6a155.22,155.22,0,0,1-3.32-35.53q.16-20.12,1.92-38.67-2.44,8.06-5.42,17.5t-6.13,18.38q-3.15,8.92-6.3,16.79a64,64,0,0,1-6.3,12.43q-5.6,8.75-11.2,11.73c-3.73,2-7.23,2.27-10.5.87s-6.24-4.37-8.92-8.92-5-10.56-6.83-18a134.45,134.45,0,0,1-2.8-18.37,129,129,0,0,1-.17-17.68Q398,366,399.09,357T401.54,338.3Z"
          transform="translate(-37 -149.5)"
          fill="var(--primary)"
        />
        <path
          class="path"
          mask="url(#mask-ju-S)"
          id="logo-s"
          d="M646.19,397.45l-9.8-20.3Q628,361.06,622,346.7t-2.1-26.6q2.46-7.35,7.88-10.68t10.15-3a8.8,8.8,0,0,1,7.17,4.2q2.45,3.86-.35,10.5-2.44,6.3-10.15,13.3a2.1,2.1,0,0,1-3-.35q-1.23-1.39.52-3.15,6.64-6.3,8.75-11.2c1.17-2.8,1.34-5,.53-6.65a4.76,4.76,0,0,0-3.68-2.8,7.15,7.15,0,0,0-5.25,1.75c-1.86,1.4-3.15,3.85-3.85,7.35a27.17,27.17,0,0,0,.18,12.6,78,78,0,0,0,4.37,13.12,96.35,96.35,0,0,0,6.48,12.43q3.67,6,6.82,10.5l11.9,20.65q8.05-4.89,17.15-10.85a77.48,77.48,0,0,0,15.4-13,2.23,2.23,0,0,1,3,.18q1.59,1.23-.17,3a66.76,66.76,0,0,1-15.57,13.12q-9.29,5.79-17.68,11.38,3.86,7.71,7.53,17A77.89,77.89,0,0,1,673,428.6a53.94,53.94,0,0,1-.88,18.9,32.85,32.85,0,0,1-9.8,16.45,31.61,31.61,0,0,1-12.42,7.35,26.72,26.72,0,0,1-13.13.87,25.51,25.51,0,0,1-11.55-5.59q-5.25-4.4-7.7-12.43a31.31,31.31,0,0,1-1-16.62A51,51,0,0,1,622.57,422a69.77,69.77,0,0,1,10.67-13.65A91.89,91.89,0,0,1,646.19,397.45Zm6.65,58.1A31.54,31.54,0,0,0,657,442.6a52.88,52.88,0,0,0-.52-14.18,88.17,88.17,0,0,0-3.68-14.17,134.06,134.06,0,0,0-5.25-12.95,98.52,98.52,0,0,0-11.72,9.8,56.51,56.51,0,0,0-9.63,12.25,47.91,47.91,0,0,0-5.42,14,34.54,34.54,0,0,0,.52,15.75q4.56,14,14.18,14.35T652.84,455.55Z"
          transform="translate(-37 -149.5)"
          fill="var(--primary)"
        />
        <path
          class="path"
          mask="url(#mask-ju-A)"
          id="logo-a"
          d="M763.44,325a5.21,5.21,0,0,1,3.32-3.5,12.47,12.47,0,0,1,5.43-.88,8.92,8.92,0,0,1,4.72,1.58,3.79,3.79,0,0,1,1.58,3.85q-1.05,9.1-1.93,18.72T775,364.2c-.24,2.34-.41,5.31-.53,8.92s-.23,7.48-.35,11.55-.06,8.35.18,12.78.58,8.75,1.05,12.95q1.74,18.9,7,23.1T797,422a144.23,144.23,0,0,0,8.4-15.57q4.2-8.94,7.87-17.33t6.3-15.05q2.63-6.64,3.68-9.1a2.13,2.13,0,0,1,2.62-1.4c1.28.24,1.93,1.17,1.93,2.8-1.4,3-3.1,6.95-5.08,11.72s-4.2,10-6.65,15.58-5.07,11.15-7.87,16.62-5.6,10.45-8.4,14.88q-6,8.75-11.55,11.73c-3.74,2-7.24,2.27-10.5.87s-6.25-4.37-8.93-8.92-4.84-10.56-6.47-18a103.07,103.07,0,0,1-3-23.63q-.18-12.4.53-23.62-4.91,9.81-10,18.55a145.71,145.71,0,0,1-11.37,16.8,131.55,131.55,0,0,1-13.3,15.23c-4.67,4.54-9.69,6.71-15,6.47q-7,0-12.6-6.47t-8.4-22.23a80.57,80.57,0,0,1-.35-20,91,91,0,0,1,4.72-21.35,83.15,83.15,0,0,1,9.45-19.07,41.29,41.29,0,0,1,13.3-13,28,28,0,0,1,17-3.5q9.45.89,20.3,9.63a16,16,0,0,1,4.72,4.55q1.92,2.81,3.68,5.95Zm-11.55,3.85q-8.05-7-14.88-6.83a18.32,18.32,0,0,0-12.25,5.25,47.05,47.05,0,0,0-9.62,13.48,113.66,113.66,0,0,0-7,17.5,130.45,130.45,0,0,0-4.2,17.85,66.78,66.78,0,0,0-1.05,14.35q.69,11.21,3,16.63t5.78,6.82a7.9,7.9,0,0,0,6.3.18,21.18,21.18,0,0,0,6.3-4,43.62,43.62,0,0,0,6.12-6.83q3-4,5.78-8.22a160.64,160.64,0,0,0,14-22.05q6.3-11.9,10.15-19.25l1.05-10.85Q759.24,335.16,751.89,328.85Z"
          transform="translate(-37 -149.5)"
          fill="var(--primary)"
        />
        <path
          class="path"
          mask="url(#mask-ju-I)"
          id="logo-i"
          d="M826.09,325a4.31,4.31,0,0,1,3-3.5,13,13,0,0,1,5.6-.88,9.2,9.2,0,0,1,4.9,1.58,3.79,3.79,0,0,1,1.58,3.85q-1.41,9.1-2.45,18.72t-1.4,19.43q-.36,3.51-.7,8.92c-.24,3.63-.35,7.48-.35,11.55s.11,8.35.35,12.78.58,8.75,1,12.95a86.13,86.13,0,0,0,2.8,14.52q1.74,5.79,4.37,7.7t6.13-.34q3.49-2.29,8.4-10.33,3.84-6.65,8.22-15.57t8.05-17.33q3.67-8.4,6.48-15.05t3.5-9.1a2,2,0,0,1,2.45-1.4c1.16.24,1.63,1.17,1.4,2.8-1.17,3-2.75,6.95-4.73,11.72s-4.14,10-6.47,15.58-4.9,11.15-7.7,16.62-5.6,10.45-8.4,14.88q-11.55,17.49-21.88,12.6T825,410.75a108.91,108.91,0,0,1-3.15-20.47,200.84,200.84,0,0,1-.18-22.23q.52-11.21,1.75-22.22T826.09,325Zm17.85-32.2a12.33,12.33,0,0,1,2.8,7.87,10.33,10.33,0,1,1-20.65,0,12.28,12.28,0,0,1,2.8-7.87,11.51,11.51,0,0,1,15.05,0Z"
          transform="translate(-37 -149.5)"
          fill="var(--primary)"
        />
        <path
          class="path"
          mask="url(#mask-ju-D)"
          id="logo-d"
          d="M1097.68,370.5a381.14,381.14,0,0,1,40.78,3q20.82,2.63,41.12,5.42t39.2,4.72a222.37,222.37,0,0,0,34.83,1.05,95.33,95.33,0,0,0,28.17-5.42,37.38,37.38,0,0,0,18.9-14.7,8.1,8.1,0,0,1,.18-5.95q1.22-3.5,3-3.85c1.17,0,2,1.05,2.45,3.15s-.58,5.25-3.15,9.45a49.82,49.82,0,0,1-21,19.6,88,88,0,0,1-29.4,8.05,166.73,166.73,0,0,1-35.7-.35q-19.24-2.1-39.55-5.25t-40.77-6.65q-20.48-3.5-40.08-4.9-25.91-1.74-41.12.88t-25.2,10a68.2,68.2,0,0,0-17.5,19.6q-7.53,12.26-18,29.4-5.25,9.09-10.85,12.08c-3.73,2-7.23,2.21-10.5.69s-6.24-4.55-8.92-9.09-4.85-10.57-6.48-18a65.26,65.26,0,0,1-2.45-13.65q-.71-8.06-1.05-16.45T954.18,377q0-7.87.35-13.48-4.54,9.81-9.45,18.55a113.58,113.58,0,0,1-11.55,16.8,141.83,141.83,0,0,1-13.12,15.23c-4.55,4.54-9.51,6.71-14.88,6.47q-7,0-12.95-6.47t-8.75-22.23a71.61,71.61,0,0,1-.17-19.43A114.31,114.31,0,0,1,888,351.6a78,78,0,0,1,8.58-18.72A46.27,46.27,0,0,1,909,319.4a24.24,24.24,0,0,1,12.78-3.85,32.94,32.94,0,0,1,12.77,2.62,43.55,43.55,0,0,1,11.9,7.53,86.53,86.53,0,0,1,10.15,10.5q.71-21.69,3-43.93t6.12-43.22a357.23,357.23,0,0,1,9.63-39.9,178.23,178.23,0,0,1,13.82-33.6q6-10.85,14.7-16.45t17-4.72q8.22.87,14,8.57t5.77,23.45q0,14.7-5.77,31.68a181.48,181.48,0,0,1-15,32.9,178.17,178.17,0,0,1-21,29,102,102,0,0,1-24.33,20.48q-1.05,13.31-2.27,29.23t-1.93,32.37q-.71,16.45-.87,32.37t.87,28.88q2.44,18.9,8.23,22.4t13.82-11.2q9.45-17.15,17.68-29.4A77.45,77.45,0,0,1,1029.26,385q11-7.89,27.12-11.38T1097.68,370.5Zm-141.4-27.65q-3.15-4.2-7.17-8.93a40.53,40.53,0,0,0-8.93-7.87,18.8,18.8,0,0,0-10.32-3.15q-5.43,0-11,5.25a49,49,0,0,0-9.27,13.65,114.58,114.58,0,0,0-6.65,17.32,123.94,123.94,0,0,0-3.85,17.5,102.3,102.3,0,0,0-1.23,13.83q.7,11.21,3.15,16.63t6.3,6.82a6.69,6.69,0,0,0,5.78.18,22.12,22.12,0,0,0,6.12-4,44.16,44.16,0,0,0,6.13-6.83q3-4,6.12-8.22A150,150,0,0,0,945.26,373q6.12-11.9,10-19.25Zm18.9-47.6a107.13,107.13,0,0,0,22.05-19.95,183.66,183.66,0,0,0,19.43-27.3,162.36,162.36,0,0,0,13.82-30.45,101.51,101.51,0,0,0,5.6-29.4q.7-11.55-2.27-18.55t-8-8.22q-5.09-1.23-11.38,3.14t-11.9,15.23a160.4,160.4,0,0,0-10.85,26.08q-4.54,14.16-8,29.4a305.76,305.76,0,0,0-5.42,30.62Q976.23,281.26,975.18,295.25Z"
          transform="translate(-37 -149.5)"
          fill="var(--primary)"
        />
      </g>
    </svg>
  `,
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class LogoComponent implements OnInit, AfterViewInit {
  @ViewChild('canvas', { static: true }) canvas: ElementRef;
  @ViewChild('maskJ', { static: true }) maskJ: ElementRef;
  @ViewChild('maskU', { static: true }) maskU: ElementRef;
  @ViewChild('maskS', { static: true }) maskS: ElementRef;
  @ViewChild('maskA', { static: true }) maskA: ElementRef;
  @ViewChild('maskILine', { static: true }) maskILine: ElementRef;
  @ViewChild('maskIDot', { static: true }) maskIDot: ElementRef;
  @ViewChild('maskDFront', { static: true }) maskDFront: ElementRef;
  @ViewChild('maskDBack', { static: true }) maskDBack: ElementRef;

  constructor() {}

  ngOnInit(): void {}

  ngAfterViewInit(): void {
    const canvasElement = this.canvas.nativeElement;

    gsap.set('.path', { drawSVG: 0, stroke: '#fff' });

    const tl = gsap.timeline({ defaults: { ease: 'none' } });

    tl.set(canvasElement, { autoAlpha: 1 })
      .to(this.maskJ.nativeElement, { duration: 0.4, drawSVG: true })
      .to(this.maskU.nativeElement, { duration: 0.3, drawSVG: true })
      .to(this.maskS.nativeElement, { duration: 0.4, drawSVG: true })
      .to(this.maskA.nativeElement, { duration: 0.3, drawSVG: true })
      .to(this.maskILine.nativeElement, { duration: 0.3, drawSVG: true })
      .to(this.maskDFront.nativeElement, { duration: 0.3, drawSVG: true })
      .to(this.maskDBack.nativeElement, { duration: 0.3, drawSVG: true })
      .to(this.maskIDot.nativeElement, { duration: 1, drawSVG: true });
  }
}
